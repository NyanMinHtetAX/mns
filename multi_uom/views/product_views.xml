<?xml version="1.0" encoding="utf-8" ?>
<odoo>
    <record id="product_template_form_view_inherit" model="ir.ui.view">
        <field name="name">product.template.form.inherit</field>
        <field name="model">product.template</field>
        <field name="inherit_id" ref="product.product_template_form_view"/>
        <field name="arch" type="xml">
            <xpath expr="//field[@name='uom_po_id']" position="attributes">
                <attribute name="domain">[('category_id', '=', uom_category_id)]</attribute>
            </xpath>
            <xpath expr="//field[@name='uom_po_id']" position="after">
                <field name="uom_category_id" invisible="0"/>
            </xpath>
            <xpath expr="//div[@name='options']//span[last()]" position="inside">
                <span class="d-inline-block" invisible="1">
                    <field name="multi_uom_ok"/>
                    <label for="multi_uom_ok"/>
                </span>
            </xpath>
            <xpath expr="//page[last()]" position="after">
                <page name="multi_uom" string="Multi UoM">
                    <field name="multi_uom_line_ids" nolabel="1">
                        <tree editable="bottom">
                            <field name="uom_id"
                                   domain="[('category_id', '=', parent.uom_category_id)]"
                                   required="1"/>
                            <field name="ratio" required="1"/>
                            <field name="is_default_uom" widget="boolean_toggle"/>
                            <field name="remark"/>
                            <field name="product_tmpl_id" invisible="1"/>
                        </tree>
                    </field>
                </page>
            </xpath>
        </field>
    </record>


    <record id="product_pricelist_item_advanced_form_view" model="ir.ui.view">
        <field name="name">product.pricelist.item.form</field>
        <field name="model">product.pricelist.item</field>
        <field name="inherit_id" ref="product.product_pricelist_item_form_view"/>
        <field name="arch" type="xml">

            <xpath expr="//form//sheet//group[3]//group[2]//field[@name='min_quantity']" position="after">
                <field name="multi_uom_line_ids" invisible="1"/>
                <field name="multi_uom_line_id" domain="[('id', 'in', multi_uom_line_ids)]" required="1"/>
                <field name="uom_id"/>
            </xpath>
            <xpath expr="//form//sheet//group[3]//group[1]//field[@name='applied_on']" position="attributes">
                <attribute name="invisible">1</attribute>
            </xpath>
            <xpath expr="//form//sheet//group[3]//group[1]//field[@name='applied_on']" position="after">
                <field name="applied_on_display" widget="radio"/>
            </xpath>
            <xpath expr="//form//sheet//group[3]//group[1]//field[@name='product_id']" position="attributes">
                <attribute name="string">Product</attribute>
                <attribute name="attrs">{'invisible':[('base_pricelist_id', '=', False),('base_display', '=',
                    'pricelist')]}
                </attribute>
            </xpath>
            <xpath expr="//form//sheet//group[1]//group[1]//field[@name='compute_price']" position="attributes">
                <attribute name="invisible">1</attribute>
            </xpath>
            <xpath expr="//form//sheet//group[1]//group[1]//field[@name='compute_price']" position="after">
                <field name="compute_price_display" widget="radio"/>
            </xpath>
            <xpath expr="//form//sheet//group[2]//group[1]//field[@name='base']" position="attributes">
                <attribute name="invisible">1</attribute>
            </xpath>
            <xpath expr="//form//sheet//group[2]//group[1]//field[@name='base']" position="after">
                <field name="base_display" attrs="{'invisible':[('compute_price', '!=', 'formula')]}"/>
            </xpath>

            <xpath expr="//form//sheet//group[2]//group[1]//field[@name='price_surcharge']" position="attributes">
                <attribute name="string">Landed Cost</attribute>
            </xpath>
            <xpath expr="//form//sheet//group[2]//group[1]//field[@name='price_surcharge']" position="after">
                <field name="adjust_amounts" widget="monetary"/>
                <field name="round_up" />
            </xpath>

            <xpath expr="//form//sheet//group[2]//group[1]//field[@name='price_discount']" position="attributes">
                <attribute name="invisible">1</attribute>
            </xpath>
            <xpath expr="//form//sheet//group[2]//group[1]//label[@for='price_discount']" position="attributes">
                <attribute name="string">Profit (%)</attribute>
            </xpath>
            <xpath expr="//form//sheet//group[2]//group[1]//field[@name='price_discount']" position="after">
                <field name="profit_percent"/>

            </xpath>
            <xpath expr="//form//sheet//group[2]//group[1]//field[@name='price_surcharge']" position="after">
                <field name="total_price"
                       attrs="{'invisible':[('base','=','list_price'),'|',('base','=','standard_price'),('compute_price_display','=','fixed')], 'readonly':[('base','=','final_purchase_price')]}"
                       force_save="1" context="{'force_recompute':True}"/>
                <field name="product_list_price" invisible="1"/>
            </xpath>
            <xpath expr="//form//sheet//group[3]//group[1]//field[@name='product_id']" position="after">
                <field name="internal_note" readonly="1"/>
            </xpath>

        </field>
    </record>

    <record id="pricelist_tree_inherit" model="ir.ui.view">
        <field name="name">pricelist.tree.inherit</field>
        <field name="model">product.pricelist</field>
        <field name="inherit_id" ref="product.product_pricelist_view_inherit"/>
        <field name="arch" type="xml">
            <xpath expr="//field[@name='price']" position="after">
                <field name="total_price"/>
            </xpath>
        </field>
    </record>


    <record id="view_pricelist_item_uom_tree" model="ir.ui.view">
        <field name="name">pricelist.item.uom.tree</field>
        <field name="model">pricelist.item.uom</field>
        <field name="arch" type="xml">
            <tree editable="top" default_order="pricelist_id,multi_uom_line_id,price">
                <field name="pricelist_id" required="1"/>
                <field name="product_id"/>
                <field name="product_tmpl_id"/>
                <field name="pricelist_qty"/>
                <field name="current_company_id"/>
                <field name="currency_id"/>
                <field name="multi_uom_line_id" string="UoM" domain="[('product_tmpl_id', '=', product_tmpl_id)]"/>
                <field name="price" widget="monetary" options="{'currency_field': 'currency_id'}"/>
            </tree>
        </field>
    </record>
</odoo>