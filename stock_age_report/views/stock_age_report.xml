<?xml version="1.0" encoding="utf-8"?>
<odoo>
	<data>

		<record model="ir.ui.view" id="tree_stock_age_report_stock_age_sql_report">
			<field name="name">Stock Age Report Tree</field>
			<field name="model">stock_age_report.stock_age_sql_report</field>
			<field name="arch" type="xml">
				<tree string="Stock Age Report" create="0" delete = '0' default_order = 'purchase_datetime desc, move_id desc'>
					<field name = 'order_name' />
					<field name = 'supplier_id' />
					<field name = 'product_id' />
					<field name = 'internal_reference' />
					<field name = 'to_location' />
					<field name = 'purchase_date' />
					<field name = 'stock_aged_days' />
					<field name='available_qtys' optional="hide"/>
					<field name = 'multi_uom_onhand_qty' />
					 <field name = 'onhand_qtys_in_pcs' />
					<field name = 'purchase_price'  widget = 'monetary' />
					<field name = 'total_amount'  widget = 'monetary' />
				</tree>
			</field>
		</record>

		<record id="search_stock_age_report_stock_age_sql_report" model="ir.ui.view">
            <field name="name">Stock Age Report Search</field>
            <field name="model">stock_age_report.stock_age_sql_report</field>
            <field name="arch" type="xml">
                <search string="Stock Age Report">
                    <field name="product_id"/> 
                    <field name="supplier_id"/>
                    <field name="to_location" string = "Location"/>

                    <separator/>
                    <group expand='0' string='Group by ...'>
                        <filter string='Product' name="group_by_product_id" context="{'group_by': 'product_id'}"/>
                       <filter string='Supplier' name="group_by_supplier_id" context="{'group_by': 'supplier_id'}"/>
                        <filter string = 'Purchase Date' name="group_by_purchase_date" context="{'group_by': 'purchase_date'}"/> 
                        <filter string = 'Location' name="group_by_to_location" context="{'group_by': 'to_location'}"/> 
                    </group>
                </search>
            </field>
        </record>

		<record id="action_stock_age_report_stock_age_sql_report" model="ir.actions.act_window">
			<field name="name">Stock Age Report</field> 
			<field name="type">ir.actions.act_window</field> 
			<field name="res_model">stock_age_report.stock_age_sql_report</field>
			<field name="view_mode">tree,form</field>
			<field name="domain">[('product_id.product_tmpl_id.qty_available', '>', 0 )]</field>
			<field name="context">{'search_default_group_by_product_id': 1, 'search_default_group_by_to_location': 1}</field>

		</record>


		 <menuitem 
		 	name="Stock Age Report" 
		 	action="action_stock_age_report_stock_age_sql_report"
		 	id="menu_stock_age_report_stock_age_sql_report" 
            parent="stock.menu_warehouse_report" 
            sequence="10000"/>

	</data>
</odoo>